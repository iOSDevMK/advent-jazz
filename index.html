<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Jazz Riddles Advent Calendar</title>
    <meta property="og:title" content="Jazz Riddles Advent Calendar">
    <meta property="og:description" content="Open a door, listen to the track, guess the singer — then reveal the voice.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://iosdevmk.github.io/advent-jazz/preview.jpg">
    <meta property="og:image:secure_url" content="https://iosdevmk.github.io/advent-jazz/preview.jpg">
    <meta property="og:url" content="https://iosdevmk.github.io/advent-jazz/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Jazz Riddles Advent Calendar">
    <meta name="twitter:description" content="Open a door, listen to the track, guess the singer — then reveal the voice.">
    <meta name="twitter:image" content="https://iosdevmk.github.io/advent-jazz/preview.jpg">
    <meta name="apple-mobile-web-app-title" content="Jazz Advent">
    <link rel="icon" type="image/svg+xml" href="assets/icons/favicon.svg">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/icons/favicon-96.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16.png">
    <link rel="shortcut icon" type="image/x-icon" href="assets/icons/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/favicon.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;600;700&family=Luxurious+Script&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div class="music-controls">
      <button id="musicPrev" class="music-skip" aria-label="Previous background track"><span aria-hidden="true">⏮</span></button>
      <button id="musicToggle" class="music-toggle" aria-pressed="false" aria-label="Toggle background music">
        <span class="music-note" aria-hidden="true">♪</span>
        <span class="music-playpause" aria-hidden="true">▶</span>
      </button>
      <button id="musicNext" class="music-skip" aria-label="Next background track"><span aria-hidden="true">⏭</span></button>
    </div>
    <button id="snowToggle" class="music-skip" aria-pressed="false" aria-label="Toggle snowfall"><span aria-hidden="true">❄</span></button>
    <a class="brand-link" href="https://www.instagram.com/milesahead.digitalart" target="_blank" rel="noopener noreferrer">milesahead.digitalart</a>
    <main class="calendar">
      <h1>Jazz Riddles Advent Calendar</h1>
      <p class="subtitle">Open a door, listen to the track, guess the singer — then reveal the voice.</p>
      <div id="grid" class="grid"></div>
    </main>

    <div id="modal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop" id="backdrop"></div>
      <div class="modal-content" id="modalContent">
        <button id="closeBtn" class="close">✕</button>
        <p id="riddleText" class="riddle-text">Listen closely before you reveal who’s behind today’s door.</p>
        <div id="zoomFrame" class="zoom-frame">
          <img id="dayImg" class="day-image" src="assets/images/day-1-back.svg" alt="Day image">
          <svg id="signatureOverlay" class="signature-overlay hidden" viewBox="0 0 400 100" xmlns="http://www.w3.org/2000/svg">
            <text id="signatureText" x="50%" y="70%" text-anchor="middle" class="signature-text"></text>
          </svg>
          <div id="artistOverlay" class="artist-overlay hidden">
            <span id="artistLabel">Artist name</span>
          </div>
        </div>
        <div class="player-controls" aria-label="Audio controls">
          <button id="playPauseBtn" class="btn player-btn play-state" aria-label="Play"></button>
          <div class="time-text time-elapsed"><span id="timeElapsed">0:00</span></div>
          <div class="progress-container" id="progressContainer" aria-label="Playback progress">
            <div class="progress-track" id="progressTrack">
              <div class="progress-fill" id="progressFill" style="width:0%"></div>
              <div class="progress-handle" id="progressHandle"></div>
            </div>
          </div>
          <div class="time-text time-remaining"><span id="timeRemaining">--:--</span></div>
          <button id="skipRevealBtn" class="btn player-btn skip-btn" aria-label="Reveal singer"></button>
        </div>
        <audio id="audio" preload="auto"></audio>
        <div class="actions">
          <button id="revealBtn" class="btn hidden">Reveal Singer</button>
        </div>
        <img id="singerReveal" class="singer-reveal hidden" src="assets/images/singer-front.png" alt="Singer front">
      </div>
    </div>

    <audio id="bgMusic" loop>
      <source src="assets/music/song-1.mp3" type="audio/mpeg">
    </audio>

    <div id="lockDialog" class="lock-dialog hidden" aria-hidden="true">
      <div id="lockBackdrop" class="lock-backdrop"></div>
      <div class="lock-content">
        <button id="lockCloseBtn" class="close">✕</button>
        <h2 class="lock-title">Locked Door</h2>
        <p id="lockLead" class="lock-lead">This door opens at midnight. Until then, enjoy a jazz fact.</p>
        <div class="lock-history" id="lockHistory" aria-label="24 short facts from jazz history"></div>
        <div class="lock-audio-actions">
          <button id="factAudioBtn" class="btn fact-audio-btn play" disabled>Play fact audio</button>
        </div>
      </div>
    </div>

    <audio id="factAudio" preload="auto"></audio>
    <footer class="site-footer">
      <p>Fan-made advent calendar for personal enjoyment. The web application, music, images, and spoken audio are all AI generated; no affiliation implied. Concept and execution by the creator; content and riddles were generated AI-assisted.</p>
    </footer>

    <script type="module" src="script.js"></script>
  </body>
</html>
